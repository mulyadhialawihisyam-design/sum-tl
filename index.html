<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Summary Team Leader</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
:root{
  --bg:#0b1020;
  --card:#121a33;
  --accent:#4da3ff;
  --danger:#ff4d4d;
  --text:#eaf0ff;
  --mp-gold:#e6c15a;
}

*{box-sizing:border-box;margin:0;padding:0;font-family:Inter,Arial,sans-serif;}

body{
  background:linear-gradient(180deg,#060b1a,#0b1020);
  color:var(--text);
  min-height:100vh;
  padding:40px 16px 80px; /* ⬅️ ruang bawah */
}

h1{
  text-align:center;
  margin-bottom:40px;
  font-size:2.2rem;
  font-weight:700;
}

/* ================= CAROUSEL ================= */
.carousel-container{
  position:relative;
  max-width:1100px;
  margin:0 auto 120px; /* ⬅️ JARAK KE FOOTER */
}

.carousel{
  position:relative;
  width:100%;
  height:480px; /* ⬅️ DITINGGIKAN */
  perspective:1400px;
  display:flex;
  align-items:center;
  justify-content:center;
}

/* ================= CARD ================= */
.card{
  position:absolute;
  left:50%;
  top:50%;
  width:240px;
  padding:16px;
  border-radius:14px;
  background:var(--card);
  box-shadow:0 18px 40px rgba(0,0,0,.55);
  transition:transform .6s ease, box-shadow .6s ease;
}

/* ================= NAV ================= */
.nav-btn{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  width:44px;
  height:44px;
  border:none;
  border-radius:50%;
  background:var(--accent);
  color:#fff;
  cursor:pointer;
  z-index:20;
}
.nav-btn.left{left:0;}
.nav-btn.right{right:0;}

/* ================= AVATAR ================= */
.avatar-wrapper{
  position:relative;
  width:72px;
  margin:0 auto 8px;
}

.avatar{
  width:72px;
  height:72px;
  border-radius:50%;
  background:linear-gradient(135deg,#2f4fa8,#4da3ff);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:28px;
  font-weight:700;
}

/* Border animasi berputar jika SISA <=0: paduan biru, merah, orange */
.avatar.alert {
  position: relative;
  animation: spin-border 2s linear infinite;
}

.avatar.alert::before {
  content: '';
  position: absolute;
  top: -4px;
  left: -4px;
  right: -4px;
  bottom: -4px;
  border-radius: 50%;
  background: conic-gradient(from 0deg, #4da3ff, #ff4d4d, #ff8c00, #4da3ff); /* Biru -> Merah -> Orange -> Biru */
  z-index: -1;
  animation: spin-border-inner 2s linear infinite;
}

@keyframes spin-border {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes spin-border-inner {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(-360deg); } /* Arah berlawanan untuk efek */
}

.mp-badge{
  position:absolute;
  bottom:-4px;
  right:-4px;
  width:30px;
  height:30px;
  border-radius:50%;
  background:radial-gradient(circle,var(--mp-gold),#caa53a);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:10px;
  font-weight:800;
  color:#1b1604;
}

/* ================= NAME ================= */
.name-row{
  display:flex;
  justify-content:center;
  align-items:center;
  gap:6px;
  margin-bottom:10px;
}

.name{font-size:15px;font-weight:600;}

/* ================= ERRORS ================= */
.errors{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:6px;
  font-size:12px;
}

.error{
  display:flex;
  gap:6px;
  background:#0e1530;
  padding:6px;
  border-radius:6px;
  align-items:center;
}

.error span{
  font-size:11px;
  opacity:.9;
}

/* ================= TOTAL ================= */
.total-box{
  margin-top:10px;
  border-radius:8px;
  overflow:hidden;
  text-align:center;
}

.total-label{
  background:#10255a;
  padding:6px;
  font-size:11px;
}

.total-value{
  background:var(--danger);
  padding:8px;
  font-size:18px;
  font-weight:700;
}

.sisa{
  margin-top:8px;
  font-size:11px;
  text-align:center;
  background:#0e1530;
  padding:6px;
  border-radius:6px;
}

footer{
  text-align:center;
  font-size:12px;
  opacity:.6;
}
</style>
</head>

<body>

<h1>Summary Team Leader</h1>

<div class="carousel-container">
  <button class="nav-btn left" id="prevBtn"><i class="fa fa-chevron-left"></i></button>
  <div class="carousel" id="carousel"></div>
  <button class="nav-btn right" id="nextBtn"><i class="fa fa-chevron-right"></i></button>
</div>

<footer>Created by Mulya.id</footer>

<script>
const API_URL="https://script.google.com/macros/s/AKfycbxZKVtPdJUHQQs2KQy45HlwBDihFB3F0V5TQwjtW72-XXWkC3juCQPZTqz5zsb1aqC6IA/exec";

const categories = [
  {key:"Rusak/Pecah/Cacat",label:"Rusak",icon:"fa-glass-water-droplet"},
  {key:"Barang Kurang",label:"Kurang",icon:"fa-minus-circle"},
  {key:"Kurang Sparepart",label:"Sparepart",icon:"fa-box-open"},
  {key:"Salah Kirim",label:"Salah",icon:"fa-triangle-exclamation"},
  {key:"Lebih Kirim",label:"Lebih",icon:"fa-plus-circle"},
  {key:"Barang Hilang",label:"Hilang",icon:"fa-magnifying-glass"}
];

const tlPages = {
  "Mulyadi": "https://mulyadhialawihisyam-design.github.io/mulyadi-tl/",
  "Jovany Rizki Gusleo": " https://mulyadhialawihisyam-design.github.io/jovan-tl/",
  "Fahrul Jihat": " https://mulyadhialawihisyam-design.github.io/fahruljihat-tl/",
  "Millenido Kresna Sejati": "https://mulyadhialawihisyam-design.github.io/milenindo-tl/",
  "Gerad Polii": " https://mulyadhialawihisyam-design.github.io/gerad-tl/"
};

let data=[];
let rotation=0;
const angle=72;
const radius=360; /* ⬅️ diturunkan */

fetch(API_URL)
.then(r=>r.json())
.then(res=>{
  data=res.data;
  render();
});

function render(){
  const c=document.getElementById("carousel");
  c.innerHTML="";
  data.forEach(d=>{
   const card=document.createElement("div");
card.className="card";
card.style.cursor="pointer";

card.onclick=()=>{
  const url = tlPages[d.Nama];
  if(url){
    window.location.href = url;
  }
};

    card.innerHTML=`
      <div class="avatar-wrapper">
        <div class="avatar ${parseInt(d.SISA)<=0?'alert':''}">${d.Nama.charAt(0)}</div>
        <div class="mp-badge">${d.Mp}</div>
      </div>

      <div class="name-row">
        <div class="name">${d.Nama}</div>
      </div>

      <div class="errors">
        ${categories.map(c=>`
          <div class="error">
            <i class="fa-solid ${c.icon}"></i>
            <span>${c.label}</span>
            <b>${d[c.key]}</b>
          </div>
        `).join("")}
      </div>

      <div class="total-box">
        <div class="total-label">Total Complain</div>
        <div class="total-value">${d["Total Complain"]}</div>
      </div>

      <div class="sisa">Sisa toleransi: <b>${d.SISA}</b></div>
    `;
    c.appendChild(card);
  });
  update();
}

prevBtn.onclick=()=>spin(-angle);
nextBtn.onclick=()=>spin(angle);

function spin(a){
  rotation+=a;
  update();
}

function update(){
  document.querySelectorAll(".card").forEach((card,i)=>{
    const deg=i*angle-rotation;
    const isCenter=Math.abs(deg%360)<angle/2;

    card.style.transform=`
      translate(-50%,-50%)
      rotateY(${deg}deg)
      translateZ(${radius}px)
      scale(${isCenter?1.12:1})
    `;
    card.style.zIndex=isCenter?5:1;
  });
}
</script>

</body>
</html>
